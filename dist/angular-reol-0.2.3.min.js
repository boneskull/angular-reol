/*! angular-reol 13-10-2013 */
!function(){"use strict";angular.module("reol",[]).factory("reol",["$parse",function(a){var b=function(a){var b=this;a=a||{},this.index={},this.indexes={},angular.forEach(a,function(c,d){b.index[d]={},b.indexes[d]=a[d]})};return b.prototype=[],b.prototype.add=function(a,b){var c,d,e=this;if(b=b||function(a){if(angular.isDefined(a))throw a},!angular.isObject(a)&&!angular.isArray(a))return b(new Error("add() requires an object or array of objects")),this;if(angular.isArray(a)){for(c=0,d=a.length;d>c;c++)this.add(a[c]);return this}return this.push(a),angular.forEach(this.indexes,function(b,c){e._addToIndex(c,a)}),b(),this},b.prototype.merge=function(a,b){return this.add(a,b)},b.prototype.find=function(a,b,c){var d,e,f;if(b=b||angular.noop,angular.isString(a))d=a;else if(angular.isObject(a)){for(e in a)if(a.hasOwnProperty(e)){d=e;break}}else if(angular.isDefined(a))throw new Error("find() expects a string, an object as the first parameter, or no parameters");return d?(f=this.index[d]?this.findInIndex(d,a[d]):this.findInList(d,a[d],c),angular.isArray(f)||(f=[f]),b(null,f),f):(b(this.toArray()),this.toArray())},b.prototype.findOne=function(a,b){return b=b||angular.noop,this.find(a,function(a,c){b(a,c[0])},!0)[0]},b.prototype._clear=function(a){a=a||angular.noop,this.index={},this.length=0,a()},b.prototype._findIndexInList=function(a,b){var c,d,e=this;for(c=0,d=e.length;d>c;c++)if(e[c].hasOwnProperty(a)&&e[c][a]===b)return c;return-1},b.prototype.remove=function(a,b,c){function d(b,c){g._removeFromIndex(c,a)}var e,f,g=this;if(b=b||angular.noop,!angular.isObject(a)||null===a){if(c&&this.length>1)throw new Error("attempt to remove everything from a length > 1 array while specifying to remove only one item");return this._clear(b),void 0}for(e in a)a.hasOwnProperty(e)&&(f=e,angular.forEach(this.indexes,d),this.splice(this._findIndexInList(f,a[f]),1));b()},b.prototype.findInIndex=function(a,b){return this.index[a][angular.toJson(b)]},b.prototype.findInList=function(a,b,c){var d,e,f=[],g=this;for(d=0,e=g.length;e>d&&(!g[d].hasOwnProperty(a)||g[d][a]!==b||(f.push(g[d]),!c));d++);return f},b.prototype.toArray=function(){return[].slice.call(this)},b.prototype._addToIndex=function(b,c){var d;return c[b]?d=angular.toJson(c[b]):b.indexOf(".")&&(d=angular.toJson(a(b)(c))),angular.isUndefined(d)?!1:this.index[b].hasOwnProperty(d)?!1:(this.index[b][d]=c,!0)},b.prototype._removeFromIndex=function(b,c){var d;return c[b]?d=angular.toJson(c[b]):b.indexOf(".")&&(d=angular.toJson(a(b)(c))),angular.isUndefined(d)?!1:this.index[b].hasOwnProperty(d)?(delete this.index[b][d],!0):!1},function(a){return new b(a)}}])}();